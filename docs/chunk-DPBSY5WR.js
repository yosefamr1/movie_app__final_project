import{O as D,Pb as g,Qb as y,T as h,Y as M,a as o,aa as k,b as u,ca as p,ga as R,ha as x}from"./chunk-OSJEPRFL.js";function E(e){let t=g(()=>e());return F(t)?new Proxy(e,{get(n,i){return i in t?(R(n[i])||Object.defineProperty(n,i,{value:y(()=>n()[i]),configurable:!0}),E(n[i])):n[i]}}):e}var z=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function F(e){if(e===null||typeof e!="object"||q(e))return!1;let t=Object.getPrototypeOf(e);if(t===Object.prototype)return!0;for(;t&&t!==Object.prototype;){if(z.includes(t.constructor))return!1;t=Object.getPrototypeOf(t)}return t===Object.prototype}function q(e){return typeof e?.[Symbol.iterator]=="function"}var w=new WeakMap,s=Symbol("STATE_SOURCE");function m(e,...t){e[s].update(n=>t.reduce((i,c)=>o(o({},i),typeof c=="function"?c(i):c),n)),B(e)}function T(e){return e[s]()}function S(e,t,n){n?.injector||M(S);let c=(n?.injector??h(k)).get(p);V(e,t),t(T(e));let r=()=>_(e,t);return c.onDestroy(r),{destroy:r}}function j(e){return w.get(e[s])||[]}function B(e){let t=j(e);for(let n of t){let i=g(()=>T(e));n(i)}}function V(e,t){let n=j(e);w.set(e[s],[...n,t])}function _(e,t){let n=j(e);w.set(e[s],n.filter(i=>i!==t))}function W(...e){let t=[...e],n=typeof t[0]=="function"?{}:t.shift(),i=t;return(()=>{class r{constructor(){let a=i.reduce((d,U)=>U(d),G()),{stateSignals:l,props:O,methods:A,hooks:H}=a,b=o(o(o({},l),O),A);this[s]=a[s];for(let d of Reflect.ownKeys(b))this[d]=b[d];let{onInit:I,onDestroy:v}=H;I&&I(),v&&h(p).onDestroy(v)}static \u0275fac=function(l){return new(l||r)};static \u0275prov=D({token:r,factory:r.\u0275fac,providedIn:n.providedIn||null})}return r})()}function G(){return{[s]:x({}),stateSignals:{},props:{},methods:{},hooks:{}}}function C(e){return t=>{let n=o(o(o({[s]:t[s]},t.stateSignals),t.props),t.methods),i=typeof e=="function"?e(n):e,c=r=>{let f=i[r],a=t.hooks[r];return f?()=>{a&&a(),f(n)}:a};return u(o({},t),{hooks:{onInit:c("onInit"),onDestroy:c("onDestroy")}})}}function P(e){return t=>{let n=e(o(o(o({[s]:t[s]},t.stateSignals),t.props),t.methods));return Reflect.ownKeys(n),u(o({},t),{methods:o(o({},t.methods),n)})}}function K(e){return t=>{let n=typeof e=="function"?e():e,i=Reflect.ownKeys(n);t[s].update(r=>o(o({},r),n));let c=i.reduce((r,f)=>{let a=y(()=>t[s]()[f]);return u(o({},r),{[f]:E(a)})},{});return u(o({},t),{stateSignals:o(o({},t.stateSignals),c)})}}var J=[],et=W({providedIn:"root"},K({wisharr:J}),P(e=>({addtowish:t=>m(e,{wisharr:[...e.wisharr(),t]}),removefromwish:t=>m(e,{wisharr:e.wisharr().filter(n=>n.id!==t)}),isInwish:t=>e.wisharr().some(n=>n.id===t),getWishItems:()=>e.wisharr(),togglemovie(t,n){t.stopPropagation(),this.isInwish(n.id)?this.removefromwish(n.id):this.addtowish(n)},togglemoviedetails(t){this.isInwish(t.id)?this.removefromwish(t.id):this.addtowish(t)}})),C({onInit(e){console.log("Store Initialized");let t=S(e,n=>{console.log("Counter changed to:",n.wisharr)})},onDestroy(e){console.log("Store Destroyed")}}));export{et as a};
